{% extends "base.html" %}
{% block title %}Keşfet - Kuromanga{% endblock %}
{% block content %}
<div class="hero-section">
    <div class="hero-content">
        {% if query %}
            <h1>"{{ query }}" için sonuçlar</h1>
            <p class="text-muted">{{ display_manga|length }} manga bulundu.</p>
        {% else %}
            <h1>Manga Keşfet</h1>
            <p class="text-muted">En yeni ve popüler mangaları okumaya hemen başla.</p>
        {% endif %}
    </div>
    <div class="hero-stats">
        <span class="badge">{{ display_manga|length }} Manga</span>
    </div>
</div>

<div class="section-header mb-8">
    <h2 class="section-title">{% if query %}Arama Sonuçları{% else %}Tüm Mangalar{% endif %}</h2>
</div>

<div class="manga-grid">
  {% for item in display_manga %}
    <article class="manga-card">
      <a href="{{ url_for('manga.manga_detail', slug=item.manga.slug) }}" class="manga-cover-wrap">
        {% if item.cover %}
          <img class="manga-cover" src="{{ item.cover }}" alt="{{ item.manga.title }}" loading="lazy">
        {% else %}
          <div class="manga-cover" style="background: var(--bg-soft); display: flex; align-items: center; justify-content: center;">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--border)" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
          </div>
        {% endif %}
        <div class="manga-overlay">
           <span class="btn btn-primary btn-sm">Oku</span>
        </div>
      </a>
      <div class="manga-info">
        <h3 class="manga-title">
          <a href="{{ url_for('manga.manga_detail', slug=item.manga.slug) }}">{{ item.manga.title }}</a>
        </h3>
        {% if item.manga.description %}
          <p class="card-desc" style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; margin-top: 4px;">
            {{ item.manga.description }}
          </p>
        {% endif %}
      </div>
    </article>
  {% else %}
    <div class="section text-center py-12" style="grid-column: 1 / -1;">
      <div class="mb-4">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="var(--text-muted)" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
      </div>
      <h3 class="text-xl font-bold mb-2">Sonuç Bulunamadı</h3>
      <p class="text-muted">Aradığınız kriterlere uygun manga bulunamadı. Lütfen farklı bir anahtar kelime deneyin.</p>
      <a href="{{ url_for('manga.manga_list') }}" class="btn btn-primary mt-4">Tüm Mangalara Dön</a>
    </div>
  {% endfor %}
</div>
{% endblock %}
